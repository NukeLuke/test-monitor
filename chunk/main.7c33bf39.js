(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"M/Zy":function(e,t,n){},QOxo:function(e,t,n){e.exports={page:"App__page--1yHpX",videos:"App__videos--3epTg",video2:"App__video2--1st8N",buttons:"App__buttons--2cZLQ",imgs:"App__imgs--3jvxN",img:"App__img--3qapZ"}},Vtdi:function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),r=n.n(a),c=n("i8i4"),o=n.n(c),i=n("Wgwc"),s=n.n(i),l=(n("pHGr"),n("kPgG"),n("M/Zy"),n("RIqP")),u=n.n(l),d=n("yXPU"),m=n.n(d),g=n("J4zp"),p=n.n(g),v=n("o0o1"),f=n.n(v),w=n("QOxo"),b=n.n(w),h={mimeType:"video/webm;codecs=vp9",BitsPerSecond:100},E=function(e){var t=Object(a.useRef)(null),n=(Object(a.useRef)(null),Object(a.useRef)(null)),c=(Object(a.useRef)(null),Object(a.useRef)(null)),o=Object(a.useRef)({timer:0,recordedBlobs:[]}),i=Object(a.useState)([]),s=p()(i,2),l=s[0],d=s[1],g=Object(a.useState)([]),v=p()(g,2),w=(v[0],v[1],function(){var e=m()(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:!0,audio:!1});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),E=function(){var e=m()(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w().then((function(e){n.current&&(n.current.srcObject=e,o.current.mediaRecorder=new MediaRecorder(e,h))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:b.a.page},r.a.createElement("div",{className:b.a.videos},r.a.createElement("div",{className:b.a.video1,title:"摄像头"},r.a.createElement("video",{width:500,height:400,ref:n,autoPlay:!0,controls:!0})),r.a.createElement("div",{className:b.a.video2,title:"截取桌面"},r.a.createElement("video",{width:500,height:400,ref:c,autoPlay:!0,controls:!0}))),r.a.createElement("div",{className:b.a.buttons},r.a.createElement("button",{onClick:E},"开启摄像头"),r.a.createElement("button",{onClick:function(){n.current.srcObject=void 0,o.current.mediaRecorder=void 0}},"关闭摄像头")),r.a.createElement("div",{className:b.a.buttons},r.a.createElement("button",{onClick:function(){n.current&&n.current.srcObject?setTimeout((function(){t.current.getContext("2d").drawImage(n.current,0,0,500,400);var e=t.current.toDataURL("image/jpeg",.9);d([].concat(u()(l),[e]))}),300):window.alert("请先开启摄像头")}},"截取摄像头")),r.a.createElement("div",{className:b.a.buttons},r.a.createElement("button",{ghost:!0,onClick:function(){l&&l.length?(localStorage.setItem("imgs",JSON.stringify(l)),window.alert("缓存成功")):window.alert("无图片可缓存")}},"缓存图片"),r.a.createElement("button",{ghost:!0,onClick:function(){var e=JSON.parse(localStorage.getItem("imgs"));e&&e.length?(d(JSON.parse(localStorage.getItem("imgs"))),window.alert("覆盖读取成功")):window.alert("没有缓存")}},"读取图片"),r.a.createElement("button",{ghost:!0,onClick:function(){localStorage.removeItem("imgs"),window.alert("清除成功")}},"清除缓存")),r.a.createElement("div",{className:b.a.imgs},l&&l.length?l.map((function(e,t){return r.a.createElement("img",{key:t,className:b.a.img,src:e})})):""),r.a.createElement("canvas",{ref:t,width:500,height:400}))};s.a.locale("zh-cn");var k=function(){return r.a.createElement(E,null)};o.a.render(r.a.createElement(k,null),document.getElementById("app")),"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("service-worker.js").then((function(e){console.log("SW registered: ",e)})).catch((function(e){console.log("SW registration failed: ",e)}))}))},kPgG:function(e,t,n){}},[["Vtdi",2,0,3]]]);